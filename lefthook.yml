# Lefthook configuration for InterviewApp
# See: https://github.com/evilmartians/lefthook

# Pre-commit hooks
pre-commit:
  parallel: true
  commands:
    check:
      run: pnpm biome check --write --diagnostic-level error {staged_files}
      glob: "*.{ts,tsx,js,jsx,json}"
      stage_fixed: true
      fail_text: "❌ Linting failed. Please fix the issues above."
      pass_text: "✅ Linting passed"

    typecheck:
      run: pnpm tsc --noEmit --project tsconfig.json
      glob: "*.{ts,tsx}"
      fail_text: "❌ Type checking failed. Please fix the type errors above."
      pass_text: "✅ Type checking passed"

# Pre-push hooks
pre-push:
  parallel: true
  commands:
    # test-coverage:
    #   run: pnpm test:coverage
    #   skip:
    #     - merge
    #     - rebase
    #   fail_text: "❌ Coverage check failed. Please ensure code coverage is above 80%. Use SKIP_COVERAGE=1 to skip (not recommended for main branch)."
    #   pass_text: "✅ Coverage check passed"

    # test-e2e:
    #   run: pnpm test:e2e
    #   fail_text: "❌ E2E tests failed. Please fix the failing tests before pushing."
    #   pass_text: "✅ E2E tests passed"

    build:
      run: pnpm build
      fail_text: "❌ Build failed. Please fix the build errors before pushing."
      pass_text: "✅ Build successful"
